"use strict";var passport=require("passport"),LocalStrategy=require("passport-local").Strategy,_require=require("./middlewares/authMiddleware"),comparePassword=_require.comparePassword,UserModel=require("./models/usermodel"),usuarios=UserModel;passport.use(new LocalStrategy(function(r,t,a){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(usuarios.obtenerPorNombre(r));case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",a(null,!1,{message:"Usuario incorrecto."}));case 6:return e.next=8,regeneratorRuntime.awrap(authMiddleware.comparePassword(t,n.contraseña));case 8:if(e.sent){e.next=11;break}return e.abrupt("return",a(null,!1,{message:"Contraseña incorrecta."}));case 11:return e.abrupt("return",a(null,n));case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",a(e.t0));case 17:case"end":return e.stop()}},null,null,[[0,14]])})),passport.serializeUser(function(e,r){r(null,e.id)}),passport.deserializeUser(function(r,t){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(usuarios.obtenerPorId(r).then(function(e){t(null,e)}).catch(function(e){t(e,null)}));case 2:case"end":return e.stop()}})}),module.exports=passport;
//# sourceMappingURL=configpassport.min.js.map
