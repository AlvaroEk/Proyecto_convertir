"use strict";var sharp=require("sharp"),_require=require("@svgdotjs/svg.js"),create=_require.create;exports.convertirImagen=function(r,t){var n,a,s,o,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r.file){e.next=3;break}return e.abrupt("return",t.status(400).send("No se ha proporcionado ning√∫n archivo"));case 3:if(a="PNG",r.body.opciones&&("JPEG"===(s=r.body.opciones.toUpperCase())?a="jpeg":"JPG"===s&&(a="jpg")),"SVG"===r.body.opciones)return o=create().size(500,500),e.next=9,regeneratorRuntime.awrap(sharp(r.file.buffer).toBuffer());e.next=15;break;case 9:i=e.sent,o.image(i).size(500,500),n=o.svg(),t.set("Content-Type","image/svg+xml"),e.next=19;break;case 15:return e.next=17,regeneratorRuntime.awrap(sharp(r.file.buffer).toFormat(a).toBuffer());case 17:n=e.sent,t.set({"Content-Type":"image/".concat(a),"Content-Disposition":'attachment; filename="imagen_convertida.'.concat(a,'"')});case 19:t.send(n),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),console.error("Error al convertir la imagen:",e.t0),t.status(500).send("Error interno del servidor");case 26:case"end":return e.stop()}},null,null,[[0,22]])};
//# sourceMappingURL=conversionController.min.js.map
