"use strict";var usuarioModel=require("../models/usermodel"),authMiddleWare=require("../middlewares/authMiddleware");function registrarUsuario(e,t){var n,o,a,s,u,i;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.body,o=n.nombre,a=n.email,s=n.password,u=n.confirmPassword,r.prev=1,s!==u)return r.abrupt("return",t.status(400).send("Las contraseñas no coinciden"));r.next=4;break;case 4:return r.next=6,regeneratorRuntime.awrap(usuarioModel.obtenerPorNombre(o));case 6:if(r.sent)return r.abrupt("return",t.status(400).send("El usuario ya está registrado"));r.next=9;break;case 9:return r.next=11,regeneratorRuntime.awrap(authMiddleWare.getHash(s));case 11:return i=r.sent,r.next=14,regeneratorRuntime.awrap(usuarioModel.registrar(o,a,i));case 14:t.redirect("/login"),r.next=22;break;case 17:r.prev=17,r.t0=r.catch(1),console.log("error en el registro"),console.error(r.t0.message),t.status(500).send("Error interno del servidor");case 22:case"end":return r.stop()}},null,null,[[1,17]])}function obtenerUsuarioPorNombre(e,t){var n,o;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=e.params.nombre,r.next=4,regeneratorRuntime.awrap(usuarioModel.obtenerPorNombre(n));case 4:(o=r.sent)?t.json(o):t.status(404).send("Usuario no encontrado"),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.error(r.t0),t.status(500).send("Error al obtener usuario por nombre");case 12:case"end":return r.stop()}},null,null,[[0,8]])}function obtenerUsuarioPorId(e,t){var n,o;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=e.params.id,r.next=4,regeneratorRuntime.awrap(usuarioModel.obtenerPorId(n));case 4:(o=r.sent)?t.json(o):t.status(404).send("Usuario no encontrado"),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.error(r.t0),t.status(500).send("Error al obtener usuario por ID");case 12:case"end":return r.stop()}},null,null,[[0,8]])}module.exports={registrarUsuario:registrarUsuario,obtenerUsuarioPorNombre:obtenerUsuarioPorNombre,obtenerUsuarioPorId:obtenerUsuarioPorId};
//# sourceMappingURL=userController.min.js.map
