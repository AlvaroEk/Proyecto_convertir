{"version":3,"sources":["logout.js"],"names":["express","require","router","Router","get","req","res","regeneratorRuntime","async","_context2","prev","next","awrap","logout","err","_context","console","error","session","destroy","status","send","log","sessionStore","clear","carritoCache","redirect","stop","t0","module","exports"],"mappings":"aAAA,IAAMA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SAEvBD,OAAOE,IAAI,IAAK,SAAOC,EAAKC,GAAZ,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAAAJ,mBAAAK,MAAhBP,EAAAQ,OAAgB,SAAAC,GAAA,OAAAP,mBAAAC,MAAA,SAAAO,GAAA,OAAA,OAAAA,EAAAL,KAAAK,EAAAJ,MAAA,KAAA,EAAA,OAAAG,GAAAE,QAAAC,MAAAH,GAAAC,EAAAJ,KAAA,EAAAJ,mBAAAK,MAAAP,EAAAa,QAAAC,QAAA,SAAAL,GAAA,GAAAA,EAEK,OAFLE,QAAAC,MAAA,+BAEKH,GAAAR,EAAAc,OAAA,KAAAC,KAAA,0BAAAL,QAAAM,IAAA,mDAFL,KAAA,EAAA,OAAAP,EAAAJ,KAAA,EAAAJ,mBAAAK,MAIRP,EAAAkB,aAAAC,MAAA,SAAAV,GACAE,GAAAA,EAaE,OAZHA,QAAAC,MAAA,2CAAAH,GAYUR,EAAIc,OAAO,KAAKC,KAAK,0BAhBjBL,QAAAM,IAAA,sDAFL,KAAA,EAQRG,aAAA,GACET,EAAAA,YAAAA,SACAV,EAAAoB,SAAA,KAVM,KAAA,EAAA,IAAA,MAAA,OAAAX,EAAAY,aAAA,KAAA,EAAAlB,EAAAE,KAAA,EAAA,MAAA,KAAA,EAAAF,EAAAC,KAAA,EAAAD,EAAAmB,GAAAnB,EAAA,MAAA,GAYRO,QAAAA,MAAAA,0BAAAA,EAAAA,IACDV,EAAAc,OAAA,KAAAC,KAXc,0BAFL,KAAA,EAAA,IAAA,MAAA,OAAAZ,EAAAkB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,OAEKE,OAAAC,QAAA5B","file":"logout.min.js","sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\n\r\nrouter.get('/', async (req, res) => {\r\n  try {\r\n    await req.logout(async (err) => {\r\n      if (err) {\r\n        // Manejo del error\r\n        console.error(err);\r\n      }\r\n      await req.session.destroy((err) => {   // Eliminar la sesión completa\r\n        if (err) {\r\n          console.error('Error al destruir la sesión:', err);\r\n          return res.status(500).send('Error al cerrar sesión');\r\n        }\r\n        console.log('req.session.destroy finalizado correctamente');\r\n      });\r\n      // Eliminar el contenido del almacén de sesiones\r\n      await req.sessionStore.clear((err) => {\r\n        if (err) {\r\n          console.error('Error al limpiar el almacén de sesiones:', err);\r\n          return res.status(500).send('Error al cerrar sesión');\r\n        }\r\n        console.log('req.sessionStore.clear finalizado correctamente');\r\n      });\r\n      carritoCache = {};\r\n      res.clearCookie('token');\r\n      res.redirect('/'); // Redirigir a la página principal\r\n    });\r\n  } catch (error) {\r\n    console.error('Error al cerrar sesión:', error);\r\n    res.status(500).send('Error al cerrar sesión');\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"]}