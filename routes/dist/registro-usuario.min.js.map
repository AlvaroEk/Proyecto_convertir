{"version":3,"sources":["registro-usuario.js"],"names":["express","require","router","Router","post","req","res","_req$body","body","email","password","confirmPassword","send","db","nombre","err","usuarioExistente","status","registrarUsuario","then","redirect","module","exports"],"mappings":"aACA,IAAMA,QAAUC,QAAQ,WADxBC,OAAAF,QAAAG,SACMH,GAAOC,QAAGA,SAKhBC,OAAOE,KAAK,IAAK,SAACC,EAAKC,GAAQ,IAAAC,EAD/BF,EAAAG,KAFWP,EAGoBM,EAHpBN,OAAQQ,EAGYF,EAHZE,MAEnBC,EAC+BH,EAD/BG,SAAAC,EAC+BJ,EAD/BI,gBACAT,GAAOE,IAAUO,EAAc,OAAAL,EAC0BD,OAD1B,KAAAO,KAAA,gCAAAC,GACMF,wBADNG,EACMH,SAAAA,EAAAA,GAS7B,OAAII,EANSJ,EAAAA,OAAAA,KAAjBC,KAAkC,8BAIlCI,EAMeV,EAAIW,OAAO,KAAKL,KAAK,sCAJ5BG,GAAJG,iBAASJ,EAAAL,EAAAC,GACLS,KAAOb,WASPA,EAAIc,SAAS,YAVbL,MAIOT,SAAGS,GAUV,OAAOT,EAAIW,OAAO,KAAKL,KAAK,oCAA5BS,OAAAC,QAAWL","file":"registro-usuario.min.js","sourcesContent":["// routes/registrar-usuario.js\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst db = require('../db');\r\n\r\n// Ruta para manejar el registro de usuarios\r\nrouter.post('/', (req, res) => {\r\n    const { nombre, email, password, confirmPassword } = req.body;\r\n\r\n    // Verificar si la contraseña y su confirmación coinciden\r\n    if (password !== confirmPassword) {\r\n        return res.status(400).send('Las contraseñas no coinciden');\r\n    }\r\n\r\n    // Verificar si el usuario ya está registrado\r\n    db.obtenerUsuarioPorNombre(nombre, (err, usuarioExistente) => {\r\n        if (err) {\r\n            return res.status(500).send('Error interno del servidor');\r\n        }\r\n        if (usuarioExistente) {\r\n            return res.status(400).send('El usuario ya está registrado');\r\n        }\r\n\r\n        db.registrarUsuario(nombre, email, password)\r\n        .then(() => {\r\n            // Usuario insertado correctamente\r\n            res.redirect('/login');\r\n        })\r\n        .catch((err) => {\r\n            // Error al insertar usuario\r\n            return res.status(500).send('Error interno del servidor');\r\n        });\r\n\r\n    });\r\n});\r\n\r\nmodule.exports = router;"]}