"use strict";var express=require("express"),router=express.Router(),passport=require("passport"),authMiddleware=require("../middlewares/authMiddleware");router.get("/",function(e,r){r.render("login",{title:"Iniciar sesi√≥n",user:null!=e.user?"".concat(e.user.nombre):""})}),router.post("/",passport.authenticate("local",{failureRedirect:"/login",failureFlash:!0}),function(r,t){var s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:s=authMiddleware.generateToken(r.user.id),t.cookie("token",s,{httpOnly:!0,secure:!1}),console.log("se autentifico correctamente el token jwt",s),t.redirect("/");case 4:case"end":return e.stop()}})}),module.exports=router;
//# sourceMappingURL=login.min.js.map
